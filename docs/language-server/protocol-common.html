<!DOCTYPE HTML>
<html lang="en" >
    <head><meta charset="UTF-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>Enso Protocol Common Message Specification · Jekyll Gitbook</title><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="Build Jekyll site with the GitBook style.
"><meta name="generator" content="Jekyll (using style of GitBook 3.2.3)"><meta name="author" content="HE Tao"><link rel="stylesheet" href="/gitbook/style.css">
<link rel="stylesheet" href="/gitbook/gitbook-plugin-fontsettings/website.css">
<!-- <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css"> -->

<link rel="stylesheet" href="/gitbook/rouge-highlight-colorful.css">

<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/gitbook/images/apple-touch-icon-precomposed-152.png">
<link rel="shortcut icon" href="/gitbook/images/favicon.ico" type="image/x-icon">
            <link rel="prev" href="/" />
        

        
    </head>
    <body>
        <div class="book"><div class="book-summary">
    <div id="book-search-input" role="search">
        <input type="text" placeholder="Type to search" />
    </div>
    <nav role="navigation">
        <ul class="summary">
            
            <li class="chapter" data-level="1.1" data-path="">
            
                <a href="">
                    Jekyll Gitbook
                </a>
            </li>

            <li class="divider"></li>

            

            
                
                <li class="chapter" data-level="1.1" data-path="/jekyll/2019-04-27-why.html">
                
                    <a href="/jekyll/2019-04-27-why.html">
                        Why Jekyll with GitBook
                    </a>
                </li>
            
                
                <li class="chapter" data-level="1.1" data-path="/jekyll/2019-04-28-howto.html">
                
                    <a href="/jekyll/2019-04-28-howto.html">
                        How to Get Started
                    </a>
                </li>
            
                
                <li class="chapter" data-level="1.1" data-path="/jekyll/2019-04-28-license.html">
                
                    <a href="/jekyll/2019-04-28-license.html">
                        License
                    </a>
                </li>
            

            <li class="divider"></li>

            <li>
                <a href="https://github.com/sighingnow/jekyll-gitbook/fork" target="blank" class="gitbook-link">
                    Fork it Now!
                </a>
            </li>
        </ul>
    </nav>
</div><div class="book-body"><div class="body-inner">
    <div class="book-header" role="navigation">
        <!-- Title -->
        <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i>
            
                <a href="." >Enso Protocol Common Message Specification</a>
            
        </h1>
    </div>
    <div class="page-wrapper" tabindex="-1" role="main">
        <div class="page-inner">
            <div id="book-search-results">
                <div class="search-noresults">
                    <section class="normal markdown-section">

                        
                            <h1 id="">Enso Protocol Common Message Specification</h1>
                        

                        <h1 id="enso-protocol-common-message-specification">Enso Protocol Common Message Specification</h1>
<p>This document contains the specification of the Enso protocol messages that are
common to multiple sub-components of the protocol.</p>

<p>For information on the design and architecture of the protocol, as well as its
transport formats, please look <a href="./protocol-architecture">here</a>.</p>

<!-- MarkdownTOC levels="2,3" autolink="true" -->

<ul>
  <li><a href="#protocol-message-specification">Protocol Message Specification</a></li>
  <li><a href="#common-types">Common Types</a>
    <ul>
      <li><a href="#path"><code class="highlighter-rouge">Path</code></a></li>
      <li><a href="#ipwithsocket"><code class="highlighter-rouge">IPWithSocket</code></a></li>
      <li><a href="#ensouuid"><code class="highlighter-rouge">EnsoUUID</code></a></li>
    </ul>
  </li>
</ul>

<!-- /MarkdownTOC -->

<h2 id="protocol-message-specification">Protocol Message Specification</h2>
<p>The message specification for protocol messages must include the following
fields:</p>

<ul>
  <li><strong>Type:</strong> The type of the message (e.g. Request or Notification).</li>
  <li><strong>Direction:</strong> The direction in which the <em>originating</em> message is sent
(either <code class="highlighter-rouge">Client -&gt; Server</code> or <code class="highlighter-rouge">Server -&gt; Client</code>).</li>
  <li><strong>Connection:</strong> Which connection the message should be sent on. Write
‘Protocol’ for the textual connection and ‘Data’ for the binary connection.</li>
  <li><strong>Visibility:</strong> Whether the method should be used by the public or is an
internal / implementation detail (‘Public’ or ‘Private’).</li>
</ul>

<p>They must also contain separate sections specifying their parameters, result (if
it has one), and any errors that may occur. These specifications should be
either in typescript or flatbuffers syntax, depending on the connection on
which the message occurs.</p>

<p>The capability specifications must include the following fields, as well as a
section ‘Enables’ stating which protocol messages are gated by the capability.</p>

<ul>
  <li><strong>method:</strong> The name of the capability.</li>
  <li><strong>registerOptions:</strong> The options that must be provided to register the
capability, described using typescript type syntax.</li>
</ul>

<h2 id="common-types">Common Types</h2>
<p>There are a number of types that are shared between many of the protocol
messages. They are specified below.</p>

<h3 id="path"><code class="highlighter-rouge">Path</code></h3>
<p>A path is a representation of a path relative to a specified content root.</p>

<h4 id="format">Format</h4>
<p>Please note that segments can only be ordinary file names, <code class="highlighter-rouge">..</code> and <code class="highlighter-rouge">.</code> may not
be supported.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">Path</span> <span class="p">{</span>
  <span class="nl">rootId</span><span class="p">:</span> <span class="nx">UUID</span><span class="p">;</span>
  <span class="nl">segments</span><span class="p">:</span> <span class="p">[</span><span class="nb">String</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<pre><code class="language-idl">namespace org.enso.languageserver.protocol.binary;

//A representation of a path relative to a specified content root.
table Path {

  //a content root id that the path is relative to
  rootId: EnsoUUID;

  //path segments
  segments: [string];

}
</code></pre>

<h3 id="ipwithsocket"><code class="highlighter-rouge">IPWithSocket</code></h3>
<p>A IPWithSocket is an endpoint for communication between machines.</p>

<h4 id="format-1">Format</h4>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">IPWithSocket</span> <span class="p">{</span>
  <span class="nl">host</span><span class="p">:</span> <span class="nb">String</span><span class="p">;</span>
  <span class="nl">port</span><span class="p">:</span> <span class="nx">Int</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="ensouuid"><code class="highlighter-rouge">EnsoUUID</code></h3>
<p>An EnsoUUID is a value object containing 128-bit universally unique identifier.</p>

<h4 id="format-2">Format</h4>

<pre><code class="language-idl">namespace org.enso.languageserver.protocol.binary;

//A binary representation of universally unique identifiers.
struct EnsoUUID {

  //The most significant bits of the UUID.
  leastSigBits:uint64;

  //The most significant bits of the UUID.
  mostSigBits:uint64;

}
</code></pre>

                    </section>
                </div>

                 <!--<div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>-->
            </div>
        </div>
    </div>
</div>

                    <a href="/" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Jekyll Gitbook">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
            </div>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({
    "page": {
        "title": "Introduction",
        "level": "1.1",
        "depth": 1,
        
        "dir": "ltr"
    },    "config": {
        "plugins": ["fontsettings", "highlight", "livereload", "lunr", "search", "sharing", "theme-default", "livereload"],
        "styles": {
            "ebook": "styles/ebook.css",
            "epub": "styles/epub.css",
            "mobi": "styles/mobi.css",
            "pdf": "styles/pdf.css",
            "print": "styles/print.css",
            "website": "styles/website.css"
        },
        "pluginsConfig": {
            "fontsettings": {
                "family": "sans",
                "size": 2,
                "theme": "white"
            },
            "highlight": {},
            "livereload": {},
            "lunr": {
                "ignoreSpecialCharacters": false,
                "maxIndexSize": 1000000
            },
            "search": {},
            "sharing": {
                "all": ["facebook", "google", "twitter", "weibo", "instapaper"],
                "facebook": true,
                "google": false,
                "instapaper": false,
                "twitter": true,
                "vk": false,
                "weibo": false
            },
            "theme-default": {
                "showLevel": false,
                "styles": {
                    "ebook": "styles/ebook.css",
                    "epub": "styles/epub.css",
                    "mobi": "styles/mobi.css",
                    "pdf": "styles/pdf.css",
                    "print": "styles/print.css",
                    "website": "styles/website.css"
                }
            }
        },
        "theme": "default",
        "author": "Tao He",
        "pdf": {
            "pageNumbers": true,
            "fontSize": 12,
            "fontFamily": "Arial",
            "paperSize": "a4",
            "chapterMark": "pagebreak",
            "pageBreaksBefore": "/",
            "margin": {
                "right": 62,
                "left": 62,
                "top": 56,
                "bottom": 56
            }
        },
        "structure": {
            "langs": "LANGS.md",
            "readme": "README.md",
        },
        "variables": {},
        "title": "Jekyll Gitbook",
        "language": "en",
        "gitbook": "*"
    },
    "file": {
        "path": "docs/language-server/protocol-common.md",
        "mtime": "",
        "type": "markdown"
    },
    "gitbook": {
        "version": "3.2.3",
        "time": "2020-05-18 13:40:04 +0000"
    },
    "basePath": "",
    "book": {
        "language": ""
    }
});
            });
            </script>
        </div><script src="/gitbook/gitbook.js"></script>
<script src="/gitbook/theme.js"></script>

<script src="/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="/gitbook/gitbook-plugin-sharing/buttons.js"></script>

<!-- <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script> --></body>
</html>